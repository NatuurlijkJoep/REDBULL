<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Red Bull Tracker</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/recharts@2.5.0/dist/Recharts.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { PlusCircle, TrendingUp, Award, Plus, X, Flame, Coffee, DollarSign, Users, Download, Calendar, BarChart3, Settings } = lucide;
        const { BarChart, Bar, LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } = Recharts;

        const DEFAULT_FLAVORS = [
          'Original', 'Sugar Free', 'Tropical', 'Watermelon', 'Coconut Berry',
          'Red Edition', 'Blue Edition', 'Yellow Edition', 'Orange Edition',
          'Green Edition', 'Purple Edition', 'Winter Edition', 'Other'
        ];

        const COLORS = ['#E31937', '#1E3A8A', '#FFD700', '#FF6B35', '#9D4EDD', '#06FFA5', '#FF006E'];
        const CAFFEINE_PER_CAN = 80;

        // LocalStorage wrapper to simulate window.storage
        const storage = {
          get: (key) => {
            return new Promise((resolve) => {
              const value = localStorage.getItem(key);
              resolve(value ? { value } : null);
            });
          },
          set: (key, value) => {
            return new Promise((resolve) => {
              localStorage.setItem(key, value);
              resolve({ key, value });
            });
          }
        };

        function RedBullTracker() {
          const [entries, setEntries] = useState([]);
          const [flavors, setFlavors] = useState(DEFAULT_FLAVORS);
          const [settings, setSettings] = useState({ trackTime: false, trackCost: false, defaultCost: 2.5 });
          const [newEntry, setNewEntry] = useState({
            person: '', flavor: DEFAULT_FLAVORS[0], date: new Date().toISOString().split('T')[0],
            time: new Date().toTimeString().slice(0, 5), cost: 2.5
          });
          const [newFlavor, setNewFlavor] = useState('');
          const [showAddFlavor, setShowAddFlavor] = useState(false);
          const [activeTab, setActiveTab] = useState('dashboard');
          const [selectedPerson, setSelectedPerson] = useState(null);
          const [loading, setLoading] = useState(true);

          useEffect(() => {
            loadData();
          }, []);

          const loadData = async () => {
            try {
              const [entriesRes, flavorsRes, settingsRes] = await Promise.all([
                storage.get('redbull-entries'),
                storage.get('redbull-flavors'),
                storage.get('redbull-settings')
              ]);
              
              if (entriesRes?.value) setEntries(JSON.parse(entriesRes.value));
              if (flavorsRes?.value) setFlavors(JSON.parse(flavorsRes.value));
              if (settingsRes?.value) {
                const loadedSettings = JSON.parse(settingsRes.value);
                setSettings(loadedSettings);
                setNewEntry(prev => ({ ...prev, cost: loadedSettings.defaultCost }));
              }
            } catch (error) {
              console.log('Starting fresh');
            } finally {
              setLoading(false);
            }
          };

          const saveData = async (newEntries, newFlavors, newSettings) => {
            try {
              await Promise.all([
                storage.set('redbull-entries', JSON.stringify(newEntries || entries)),
                storage.set('redbull-flavors', JSON.stringify(newFlavors || flavors)),
                storage.set('redbull-settings', JSON.stringify(newSettings || settings))
              ]);
            } catch (error) {
              console.error('Save failed:', error);
            }
          };

          const addEntry = () => {
            const capitalizedName = newEntry.person.trim().charAt(0).toUpperCase() + newEntry.person.trim().slice(1).toLowerCase();
            
            if (!capitalizedName) {
              alert('Please enter your name!');
              return;
            }

            const entry = {
              id: Date.now(),
              ...newEntry,
              person: capitalizedName,
              timestamp: new Date().toISOString()
            };

            const updated = [...entries, entry];
            setEntries(updated);
            saveData(updated, null, null);
            
            setNewEntry({
              person: capitalizedName,
              flavor: flavors[0],
              date: new Date().toISOString().split('T')[0],
              time: new Date().toTimeString().slice(0, 5),
              cost: settings.defaultCost
            });
          };

          const addFlavor = () => {
            if (!newFlavor.trim() || flavors.includes(newFlavor.trim())) {
              alert('Invalid or duplicate flavor!');
              return;
            }
            const updated = [...flavors, newFlavor.trim()];
            setFlavors(updated);
            saveData(null, updated, null);
            setNewFlavor('');
            setShowAddFlavor(false);
          };

          const deleteFlavor = (flavor) => {
            if (flavors.length <= 1 || entries.some(e => e.flavor === flavor) && !confirm(`Delete "${flavor}"?`)) return;
            const updated = flavors.filter(f => f !== flavor);
            setFlavors(updated);
            saveData(null, updated, null);
          };

          const deleteEntry = (id) => {
            const updated = entries.filter(e => e.id !== id);
            setEntries(updated);
            saveData(updated, null, null);
          };

          const updateSettings = (key, value) => {
            const updated = { ...settings, [key]: value };
            setSettings(updated);
            if (key === 'defaultCost') setNewEntry(prev => ({ ...prev, cost: value }));
            saveData(null, null, updated);
          };

          const exportData = () => {
            const csv = [
              ['Person', 'Flavor', 'Date', 'Time', 'Cost', 'Caffeine (mg)'],
              ...entries.map(e => [e.person, e.flavor, e.date, e.time || '', e.cost || '', CAFFEINE_PER_CAN])
            ].map(row => row.join(',')).join('\n');
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `redbull-tracker-${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
          };

          const getStreak = (person) => {
            const userEntries = entries.filter(e => e.person === person).sort((a, b) => new Date(b.date) - new Date(a.date));
            if (!userEntries.length) return 0;
            
            let streak = 1;
            for (let i = 0; i < userEntries.length - 1; i++) {
              const current = new Date(userEntries[i].date);
              const next = new Date(userEntries[i + 1].date);
              const diffDays = Math.floor((current - next) / (1000 * 60 * 60 * 24));
              if (diffDays === 1) streak++;
              else break;
            }
            return streak;
          };

          const getPersonStats = (person) => {
            const userEntries = entries.filter(e => e.person === person);
            return {
              total: userEntries.length,
              caffeine: userEntries.length * CAFFEINE_PER_CAN,
              cost: settings.trackCost ? userEntries.reduce((sum, e) => sum + (parseFloat(e.cost) || 0), 0) : 0,
              streak: getStreak(person)
            };
          };

          const getAllPeople = () => [...new Set(entries.map(e => e.person))];

          const getTimeOfDayData = () => {
            if (!settings.trackTime) return [];
            const periods = { Morning: 0, Afternoon: 0, Evening: 0, Night: 0 };
            entries.forEach(e => {
              if (!e.time) return;
              const hour = parseInt(e.time.split(':')[0]);
              if (hour >= 5 && hour < 12) periods.Morning++;
              else if (hour >= 12 && hour < 17) periods.Afternoon++;
              else if (hour >= 17 && hour < 21) periods.Evening++;
              else periods.Night++;
            });
            return Object.entries(periods).map(([name, value]) => ({ name, value }));
          };

          const getPeriodComparison = () => {
            const now = new Date();
            const thisWeekStart = new Date(now.setDate(now.getDate() - now.getDay()));
            const lastWeekStart = new Date(thisWeekStart);
            lastWeekStart.setDate(lastWeekStart.getDate() - 7);
            
            const thisMonthStart = new Date(now.getFullYear(), now.getMonth(), 1);
            const lastMonthStart = new Date(now.getFullYear(), now.getMonth() - 1, 1);

            const thisWeek = entries.filter(e => new Date(e.date) >= thisWeekStart).length;
            const lastWeek = entries.filter(e => {
              const d = new Date(e.date);
              return d >= lastWeekStart && d < thisWeekStart;
            }).length;

            const thisMonth = entries.filter(e => new Date(e.date) >= thisMonthStart).length;
            const lastMonth = entries.filter(e => {
              const d = new Date(e.date);
              return d >= lastMonthStart && d < thisMonthStart;
            }).length;

            return { thisWeek, lastWeek, thisMonth, lastMonth };
          };

          const getRecaps = (person = null) => {
            const recapsByPeriod = {};
            const filteredEntries = person ? entries.filter(e => e.person === person) : entries;
            
            filteredEntries.forEach(e => {
              const date = new Date(e.date);
              const monthKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;
              const yearKey = `${date.getFullYear()}`;
              
              if (!recapsByPeriod[monthKey]) recapsByPeriod[monthKey] = { type: 'month', count: 0, caffeine: 0, cost: 0 };
              if (!recapsByPeriod[yearKey]) recapsByPeriod[yearKey] = { type: 'year', count: 0, caffeine: 0, cost: 0 };
              
              recapsByPeriod[monthKey].count++;
              recapsByPeriod[monthKey].caffeine += CAFFEINE_PER_CAN;
              recapsByPeriod[monthKey].cost += parseFloat(e.cost) || 0;
              
              recapsByPeriod[yearKey].count++;
              recapsByPeriod[yearKey].caffeine += CAFFEINE_PER_CAN;
              recapsByPeriod[yearKey].cost += parseFloat(e.cost) || 0;
            });
            
            return Object.entries(recapsByPeriod).sort((a, b) => b[0].localeCompare(a[0]));
          };

          const getWeeklyData = (person = null) => {
            const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            const filteredEntries = person ? entries.filter(e => e.person === person) : entries;
            
            const weekData = days.map(day => ({ day, count: 0 }));
            
            filteredEntries.forEach(e => {
              const dayIndex = new Date(e.date).getDay();
              weekData[dayIndex].count++;
            });
            
            return weekData;
          };

          const getWeeklyDataByPerson = () => {
            const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            const people = getAllPeople();
            
            return days.map((day, dayIndex) => {
              const dataPoint = { day };
              people.forEach(person => {
                dataPoint[person] = entries.filter(e => 
                  e.person === person && new Date(e.date).getDay() === dayIndex
                ).length;
              });
              return dataPoint;
            });
          };

          if (loading) {
            return React.createElement('div', { className: "flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-red-600" },
              React.createElement('div', { className: "text-xl text-white" }, 'Loading...')
            );
          }

          const comparison = getPeriodComparison();
          const totalCaffeine = entries.length * CAFFEINE_PER_CAN;
          const totalCost = settings.trackCost ? entries.reduce((sum, e) => sum + (parseFloat(e.cost) || 0), 0) : 0;

          return React.createElement('div', { className: "min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-red-600 p-2 sm:p-4 md:p-8" },
            React.createElement('div', { className: "max-w-7xl mx-auto" },
              // Header
              React.createElement('div', { className: "text-center mb-4 sm:mb-6" },
                React.createElement('div', { className: "inline-block bg-red-600 px-4 sm:px-8 py-3 sm:py-4 rounded-2xl sm:rounded-3xl shadow-2xl transform -rotate-1" },
                  React.createElement('h1', { className: "text-3xl sm:text-4xl md:text-5xl font-black text-yellow-300", style: {textShadow: '2px 2px 0px rgba(0,0,0,0.3)'} }, 'RED BULL TRACKER')
                )
              ),
              
              // Navigation
              React.createElement('div', { className: "flex flex-wrap gap-2 mb-4 sm:mb-6 justify-center" },
                ['dashboard', 'weekly', 'compare', 'recaps', 'settings'].map(tab =>
                  React.createElement('button', {
                    key: tab,
                    onClick: () => setActiveTab(tab),
                    className: `px-3 sm:px-6 py-2 sm:py-3 rounded-xl font-bold transition-all text-sm sm:text-base ${
                      activeTab === tab
                        ? 'bg-yellow-300 text-blue-900 shadow-lg transform scale-105'
                        : 'bg-white text-blue-900 hover:bg-yellow-100'
                    }`
                  },
                    tab === 'dashboard' && React.createElement(lucide.BarChart3, { className: "inline mr-1 sm:mr-2", size: 16 }),
                    tab === 'weekly' && React.createElement(lucide.Calendar, { className: "inline mr-1 sm:mr-2", size: 16 }),
                    tab === 'compare' && React.createElement(lucide.Users, { className: "inline mr-1 sm:mr-2", size: 16 }),
                    tab === 'recaps' && React.createElement(lucide.TrendingUp, { className: "inline mr-1 sm:mr-2", size: 16 }),
                    tab === 'settings' && React.createElement(lucide.Settings, { className: "inline mr-1 sm:mr-2", size: 16 }),
                    React.createElement('span', { className: "hidden sm:inline" }, tab.charAt(0).toUpperCase() + tab.slice(1)),
                    React.createElement('span', { className: "sm:hidden" }, tab.charAt(0).toUpperCase())
                  )
                )
              ),

              // Dashboard Tab
              activeTab === 'dashboard' && React.createElement('div', null,
                // Add Entry Form
                React.createElement('div', { className: "bg-white rounded-2xl shadow-2xl p-4 sm:p-6 mb-4 sm:mb-6 border-4 border-yellow-400" },
                  React.createElement('h2', { className: "text-xl sm:text-2xl font-bold mb-4 flex items-center gap-2 text-red-600" },
                    React.createElement(lucide.PlusCircle, { size: 20 }),
                    'Log a Red Bull'
                  ),
                  React.createElement('div', { className: "grid grid-cols-1 gap-3" },
                    React.createElement('input', {
                      type: 'text',
                      placeholder: 'Your name',
                      value: newEntry.person,
                      onChange: (e) => setNewEntry({...newEntry, person: e.target.value}),
                      className: "px-4 py-2 border-2 border-blue-900 rounded-lg focus:border-red-600 focus:outline-none font-semibold text-base"
                    }),
                    React.createElement('select', {
                      value: newEntry.flavor,
                      onChange: (e) => setNewEntry({...newEntry, flavor: e.target.value}),
                      className: "px-4 py-2 border-2 border-blue-900 rounded-lg focus:border-red-600 focus:outline-none font-semibold text-base"
                    },
                      flavors.map(f => React.createElement('option', { key: f, value: f }, f))
                    ),
                    React.createElement('input', {
                      type: 'date',
                      value: newEntry.date,
                      onChange: (e) => setNewEntry({...newEntry, date: e.target.value}),
                      className: "px-4 py-2 border-2 border-blue-900 rounded-lg focus:border-red-600 focus:outline-none font-semibold text-base"
                    }),
                    settings.trackTime && React.createElement('input', {
                      type: 'time',
                      value: newEntry.time,
                      onChange: (e) => setNewEntry({...newEntry, time: e.target.value}),
                      className: "px-4 py-2 border-2 border-blue-900 rounded-lg focus:border-red-600 focus:outline-none font-semibold text-base"
                    }),
                    settings.trackCost && React.createElement('input', {
                      type: 'number',
                      step: '0.1',
                      value: newEntry.cost,
                      onChange: (e) => setNewEntry({...newEntry, cost: e.target.value}),
                      className: "px-4 py-2 border-2 border-blue-900 rounded-lg focus:border-red-600 focus:outline-none font-semibold text-base",
                      placeholder: 'Cost (€)'
                    }),
                    React.createElement('button', {
                      onClick: addEntry,
                      className: "bg-red-600 text-yellow-300 px-6 py-3 rounded-lg font-black text-lg hover:bg-red-700 transition-all transform hover:scale-105 shadow-lg"
                    }, 'ADD')
                  )
                ),

                // Key Stats
                React.createElement('div', { className: "grid grid-cols-2 md:grid-cols-4 gap-4 mb-6" },
                  React.createElement('div', { className: "bg-yellow-300 rounded-xl shadow-xl p-4 text-center border-4 border-red-600" },
                    React.createElement('div', { className: "text-4xl font-black text-blue-900" }, entries.length),
                    React.createElement('div', { className: "text-red-600 font-bold text-sm" }, 'TOTAL')
                  ),
                  React.createElement('div', { className: "bg-yellow-300 rounded-xl shadow-xl p-4 text-center border-4 border-red-600" },
                    React.createElement(lucide.Coffee, { className: "w-8 h-8 mx-auto text-red-600 mb-1" }),
                    React.createElement('div', { className: "text-2xl font-black text-blue-900" }, totalCaffeine + 'mg'),
                    React.createElement('div', { className: "text-red-600 font-bold text-sm" }, 'CAFFEINE')
                  ),
                  settings.trackCost && React.createElement('div', { className: "bg-yellow-300 rounded-xl shadow-xl p-4 text-center border-4 border-red-600" },
                    React.createElement(lucide.DollarSign, { className: "w-8 h-8 mx-auto text-blue-900 mb-1" }),
                    React.createElement('div', { className: "text-2xl font-black text-blue-900" }, '€' + totalCost.toFixed(2)),
                    React.createElement('div', { className: "text-red-600 font-bold text-sm" }, 'SPENT')
                  ),
                  React.createElement('div', { className: "bg-yellow-300 rounded-xl shadow-xl p-4 text-center border-4 border-blue-900" },
                    React.createElement(lucide.Award, { className: "w-8 h-8 mx-auto text-red-600 mb-1" }),
                    React.createElement('div', { className: "text-xl font-black text-blue-900" },
                      getAllPeople().sort((a, b) => getPersonStats(b).total - getPersonStats(a).total)[0] || 'N/A'
                    ),
                    React.createElement('div', { className: "text-red-600 font-bold text-sm" }, 'LEADER')
                  )
                ),

                // Recent Entries
                entries.length > 0 && React.createElement('div', { className: "bg-white rounded-2xl shadow-xl p-6 border-4 border-yellow-400" },
                  React.createElement('div', { className: "flex justify-between items-center mb-4" },
                    React.createElement('h3', { className: "text-xl font-bold text-blue-900" }, 'Recent Entries'),
                    React.createElement('button', {
                      onClick: exportData,
                      className: "bg-red-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-red-700 flex items-center gap-2"
                    },
                      React.createElement(lucide.Download, { size: 16 }),
                      'Export CSV'
                    )
                  ),
                  React.createElement('div', { className: "space-y-2 max-h-96 overflow-y-auto" },
                    [...entries].reverse().slice(0, 20).map(entry =>
                      React.createElement('div', { key: entry.id, className: "flex items-center justify-between p-3 bg-yellow-100 rounded-lg border-2 border-blue-900" },
                        React.createElement('div', { className: "flex items-center gap-3 flex-wrap" },
                          React.createElement('span', { className: "font-bold text-blue-900" }, entry.person),
                          React.createElement('span', { className: "text-red-600 font-semibold" }, entry.flavor),
                          React.createElement('span', { className: "text-sm text-gray-700" }, entry.date),
                          settings.trackTime && entry.time && React.createElement('span', { className: "text-sm text-gray-600" }, entry.time),
                          settings.trackCost && entry.cost && React.createElement('span', { className: "text-sm text-green-600" }, '€' + entry.cost)
                        ),
                        React.createElement('button', {
                          onClick: () => deleteEntry(entry.id),
                          className: "text-red-600 hover:text-red-800 font-bold text-sm"
                        }, 'Delete')
                      )
                    )
                  )
                )
              ),

              // Weekly Tab
              activeTab === 'weekly' && React.createElement('div', { className: "space-y-6" },
                React.createElement('div', { className: "bg-white rounded-2xl shadow-xl p-6 border-4 border-yellow-400" },
                  React.createElement('h2', { className: "text-2xl font-bold mb-4 text-red-600 flex items-center gap-2" },
                    React.createElement(lucide.Calendar, null),
                    'All Users - Weekly Consumption'
                  ),
                  React.createElement(ResponsiveContainer, { width: "100%", height: 350 },
                    React.createElement(BarChart, { data: getWeeklyData() },
                      React.createElement(CartesianGrid, { strokeDasharray: "3 3" }),
                      React.createElement(XAxis, { dataKey: "day" }),
                      React.createElement(YAxis, null),
                      React.createElement(Tooltip, null),
                      React.createElement(Legend, null),
                      React.createElement(Bar, { dataKey: "count", fill: "#E31937", name: "Red Bulls" })
                    )
                  ),
                  React.createElement('div', { className: "grid grid-cols-7 gap-2 mt-4" },
                    getWeeklyData().map(d =>
                      React.createElement('div', { key: d.day, className: "bg-yellow-100 p-3 rounded-lg border-2 border-blue-900 text-center" },
                        React.createElement('div', { className: "text-xs font-bold text-blue-900 mb-1" }, d.day.slice(0, 3)),
                        React.createElement('div', { className: "text-2xl font-black text-red-600" }, d.count)
                      )
                    )
                  )
                ),

                getAllPeople().length > 1 && React.createElement('div', { className: "bg-white rounded-2xl shadow-xl p-6 border-4 border-yellow-400" },
                  React.createElement('h2', { className: "text-2xl font-bold mb-4 text-blue-900 flex items-center gap-2" },
                    React.createElement(lucide.Users, null),
                    'Individual Weekly Breakdown'
                  ),
                  React.createElement(ResponsiveContainer, { width: "100%", height: 400 },
                    React.createElement(BarChart, { data: getWeeklyDataByPerson() },
                      React.createElement(CartesianGrid, { strokeDasharray: "3 3" }),
                      React.createElement(XAxis, { dataKey: "day" }),
                      React.createElement(YAxis, null),
                      React.createElement(Tooltip, null),
                      React.createElement(Legend, null),
                      getAllPeople().map((person, idx) =>
                        React.createElement(Bar, { 
                          key: person, 
                          dataKey: person, 
                          fill: COLORS[idx % COLORS.length], 
                          name: person
                        })
                      )
                    )
                  )
                ),

                getAllPeople().map(person =>
                  React.createElement('div', { key: person, className: "bg-white rounded-2xl shadow-xl p-6 border-4 border-yellow-400" },
                    React.createElement('h2', { className: "text-xl font-bold mb-4 text-blue-900" }, person + "'s Weekly Pattern"),
                    React.createElement(ResponsiveContainer, { width: "100%", height: 300 },
                      React.createElement(BarChart, { data: getWeeklyData(person) },
                        React.createElement(CartesianGrid, { strokeDasharray: "3 3" }),
                        React.createElement(XAxis, { dataKey: "day" }),
                        React.createElement(YAxis, null),
                        React.createElement(Tooltip, null),
                        React.createElement(Bar, { dataKey: "count", fill: "#1E3A8A", name: "Red Bulls" })
                      )
                    ),
                    React.createElement('div', { className: "grid grid-cols-7 gap-2 mt-4" },
                      getWeeklyData(person).map(d =>
                        React.createElement('div', { key: d.day, className: "bg-yellow-100 p-3 rounded-lg border-2 border-blue-900 text-center" },
                          React.createElement('div', { className: "text-xs font-bold text-blue-900 mb-1" }, d.day.slice(0, 3)),
                          React.createElement('div', { className: "text-2xl font-black text-red-600" }, d.count)
                        )
                      )
                    ),
                    React.createElement('div', { className: "mt-4 p-4 bg-yellow-100 rounded-lg border-2 border-red-600" },
                      React.createElement('div', { className: "text-sm font-bold text-blue-900 mb-2" }, 'Favorite Day:'),
                      React.createElement('div', { className: "text-xl font-black text-red-600" },
                        getWeeklyData(person).reduce((max, d) => d.count > max.count ? d : max).day + ' (' +
                        getWeeklyData(person).reduce((max, d) => d.count > max.count ? d : max).count + ' Red Bulls)'
                      )
                    )
                  )
                )
              ),

              // Settings Tab
              activeTab === 'settings' && React.createElement('div', { className: "space-y-6" },
                React.createElement('div', { className: "bg-white rounded-2xl shadow-xl p-6 border-4 border-yellow-400" },
                  React.createElement('h2', { className: "text-2xl font-bold mb-4 text-red-600" }, 'Tracking Options'),
                  React.createElement('div', { className: "space-y-4" },
                    React.createElement('label', { className: "flex items-center gap-3 cursor-pointer" },
                      React.createElement('input', {
                        type: 'checkbox',
                        checked: settings.trackTime,
                        onChange: (e) => updateSettings('trackTime', e.target.checked),
                        className: "w-5 h-5"
                      }),
                      React.createElement('span', { className: "font-bold text-blue-900" }, 'Track time of day')
                    ),
                    React.createElement('label', { className: "flex items-center gap-3 cursor-pointer" },
                      React.createElement('input', {
                        type: 'checkbox',
                        checked: settings.trackCost,
                        onChange: (e) => updateSettings('trackCost', e.target.checked),
                        className: "w-5 h-5"
                      }),
                      React.createElement('span', { className: "font-bold text-blue-900" }, 'Track cost')
                    ),
                    settings.trackCost && React.createElement('div', null,
                      React.createElement('label', { className: "font-bold text-blue-900 block mb-2" }, 'Default cost per can (€)'),
                      React.createElement('input', {
                        type: 'number',
                        step: '0.1',
                        value: settings.defaultCost,
                        onChange: (e) => updateSettings('defaultCost', parseFloat(e.target.value)),
                        className: "px-4 py-2 border-2 border-blue-900 rounded-lg focus:border-red-600 focus:outline-none font-semibold w-32"
                      })
                    )
                  )
                ),
                React.createElement('div', { className: "bg-yellow-300 rounded-2xl shadow-xl p-6 border-4 border-blue-900" },
                  React.createElement('div', { className: "flex items-center justify-between mb-4" },
                    React.createElement('h2', { className: "text-2xl font-bold text-blue-900" }, 'Manage Flavors'),
                    React.createElement('button', {
                      onClick: () => setShowAddFlavor(!showAddFlavor),
                      className: "bg-red-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-red-700 flex items-center gap-2"
                    },
                      React.createElement(lucide.Plus, { size: 20 }),
                      'Add Flavor'
                    )
                  ),
                  showAddFlavor && React.createElement('div', { className: "flex gap-2 mb-4" },
                    React.createElement('input', {
                      type: 'text',
                      placeholder: 'Enter new flavor name',
                      value: newFlavor,
                      onChange: (e) => setNewFlavor(e.target.value),
                      onKeyPress: (e) => e.key === 'Enter' && addFlavor(),
                      className: "flex-1 px-4 py-2 border-2 border-blue-900 rounded-lg focus:border-red-600 focus:outline-none font-semibold"
                    }),
                    React.createElement('button', {
                      onClick: addFlavor,
                      className: "bg-blue-900 text-yellow-300 px-6 py-2 rounded-lg font-bold hover:bg-blue-800"
                    }, 'Save')
                  ),
                  React.createElement('div', { className: "flex flex-wrap gap-2" },
                    flavors.map(flavor =>
                      React.createElement('div', { key: flavor, className: "bg-white px-4 py-2 rounded-full flex items-center gap-2 border-2 border-blue-900 shadow" },
                        React.createElement('span', { className: "font-semibold text-blue-900" }, flavor),
                        React.createElement('button', {
                          onClick: () => deleteFlavor(flavor),
                          className: "text-red-600 hover:text-red-800"
                        }, React.createElement(lucide.X, { size: 16 }))
                      )
                    )
                  )
                )
              )
            )
          );
        }
